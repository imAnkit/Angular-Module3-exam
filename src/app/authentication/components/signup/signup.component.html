<app-loader *ngIf="isLoading"></app-loader>

<div class="auth-container" *ngIf="!isLoading && !errorMessage">
  <form #formContainer="ngForm" (ngSubmit)="onSubmit()" class="auth-card">
    <h1 class="brand-title">MyApp</h1>
    <h3 class="card-heading">Register</h3>

    <div class="input-wrapper">
      <input
        type="text"
        name="name"
        placeholder=" "
        required
        [(ngModel)]="userInput.name"
        #name="ngModel"
        class="floating-input"
      />
      <label>Name</label>
      <p class="error-msg" *ngIf="name.touched && name.invalid">
        Name is required
      </p>
    </div>

    <div class="input-wrapper">
      <input
        type="email"
        name="email"
        placeholder=" "
        required
        email
        [(ngModel)]="userInput.email"
        #email="ngModel"
        class="floating-input"
      />
      <label>Email</label>
      <p class="error-msg" *ngIf="email.touched && email.invalid">
        Valid email is required
      </p>
    </div>

    <div class="input-wrapper">
      <input
        type="password"
        name="password"
        placeholder=" "
        required
        minlength="6"
        [(ngModel)]="userInput.password"
        #password="ngModel"
        class="floating-input"
      />
      <label>Password</label>
      <p class="error-msg" *ngIf="password.touched && password.invalid">
        Password must be at least 6 characters
      </p>
    </div>

    <div class="input-wrapper">
      <select
        id="userType"
        name="userType"
        required
        [(ngModel)]="userInput.type"
        #userType="ngModel"
        class="floating-input select-input"
      >
        <option value="" disabled selected hidden></option>
        <option value="student">Student</option>
        <option value="admin">Admin</option>
      </select>
      <label>User Type</label>
      <p class="error-msg" *ngIf="userType.touched && userType.invalid">
        User type is required
      </p>
    </div>

    <button
      type="submit"
      [disabled]="formContainer.invalid"
      class="btn primary-btn"
    >
      Register
    </button>

    <p class="signup-link">
      Already have an account?
      <span (click)="onGoToLogin()">Login</span>
    </p>
  </form>
</div>
